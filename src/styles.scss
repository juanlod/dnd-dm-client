@import 'ng-zorro-antd/ng-zorro-antd.min.css';


/* Ajustes opcionales por si tienes cabecera fija */
:root { --shell-offset: 72px; }           /* ya lo usas en tu app */
html.app-scale-80 { --shell-offset: 57.6px; }  /* 72 * 0.8 */




html, body { height: 100%; margin: 0; }
:root { color-scheme: light dark; }


/* ================== CONTENEDORES GLOBALES ================== */
/* Header (puede quedarse más estrecho si quieres) */
.app-shell nz-header > .container {
    margin: 0 auto;
    max-width: 1100px;        /* ajusta si quieres el header más/menos ancho */
    padding: 16px clamp(12px, 2vw, 24px);
    box-sizing: border-box;
  }
  
  /* Content: FORZAR ANCHO GRANDE PARA EL CHAT */
  .app-shell nz-content > .container,
  .app-shell nz-content .container,
  .app-shell .content-wide,
  .container.container--wide {
    margin: 0 auto !important;
    width: 100% !important;
    max-width: clamp(1400px, 96vw, 1920px) !important;  /* << ancho grande del chat */
    padding-left: clamp(12px, 2vw, 28px) !important;
    padding-right: clamp(12px, 2vw, 28px) !important;
    box-sizing: border-box !important;
  }
  
  /* Si en algún sitio había un .container con max-width fijo, lo neutralizamos aquí */
  .container {
    width: 100%;
    box-sizing: border-box;
  }
  
  /* ================== LAYOUT DEL CHAT ================== */
  /* Sidebar fija; chat ocupa el resto */
  .chat-layout {
    display: grid;
    grid-template-columns: 420px minmax(0, 1fr); /* sidebar fija */
    gap: 22px;
    min-height: calc(100vh - 110px);
  }
  
  @media (min-width: 1600px) {
    .chat-layout { grid-template-columns: 460px minmax(0, 1fr); }
  }
  
  /* Sidebar */
  .sidebar {
    border-right: 1px solid #eee;
    padding-right: 14px;
    box-sizing: border-box;
  }
  
  .side-title { margin-top: 4px; }
  
  /* Paneles en la sidebar */
  .panel {
    margin: 16px 0;
    padding: 14px;
    border: 1px solid #f0f0f0;
    border-radius: 10px;
    background: #fff;
    box-sizing: border-box;
    overflow: hidden;
  }
  
  /* ================== ÁREA PRINCIPAL DE CHAT ================== */
  .chat {
    display: flex;
    flex-direction: column;
    min-height: 60vh;
  }
  
  /* Cabecera del chat */
  .chat-header {
    display: flex; align-items: center; gap: 8px;
    padding: 6px 2px 8px;
    border-bottom: 1px solid #f0f0f0;
    margin-bottom: 8px;
  }
  .chat-header .room { font-weight: 700; }
  .chat-header .header-actions { margin-left: auto; }
  
  /* Log de mensajes */
  .log {
    flex: 1; overflow: auto;
    padding: 12px;
    border: 1px solid #e8e8e8; border-radius: 10px;
    background:
      radial-gradient(600px 300px at 100% -20%, rgba(149,114,252,.06), transparent 60%),
      radial-gradient(600px 300px at -20% 100%, rgba(16,185,129,.06), transparent 60%),
      #fcfcfd;
    color: #111827;
    box-sizing: border-box;
  }
  .log * { color: inherit; }
  
  /* Mensajes */
  .row {
    display: grid; grid-template-columns: 36px 1fr;
    gap: 10px; margin-bottom: 12px; align-items: start;
  }
  .row.mine { grid-template-columns: 1fr 36px; }
  .row.mine .avatar { order: 2; }
  .row.mine .bubble { order: 1; }
  
  .avatar { user-select: none; }
  .avatar.c1 { background:#e6f4ff; color:#0958d9; }
  .avatar.c2 { background:#fff1f0; color:#d4380d; }
  .avatar.c3 { background:#f6ffed; color:#389e0d; }
  .avatar.c4 { background:#f9f0ff; color:#722ed1; }
  .avatar.c5 { background:#fffbe6; color:#d4b106; }
  .avatar.c6 { background:#e6fffb; color:#13c2c2; }
  
  .bubble {
    padding: 8px 10px; border-radius: 10px;
    border: 1px solid #eee; background: #fff;
    box-shadow: 0 1px 0 rgba(0,0,0,.02);
    max-width: 100%; word-wrap: break-word; color: #111827;
  }
  .row.mine .bubble { background:#eef6ff; border-color:#bae0ff; }
  .row.dm   .bubble { background:#f6ffed; border-color:#b7eb8f; }
  .row.roll .bubble { background:#fff7e6; border-color:#ffd591; }
  .row.system .bubble { background:#fafafa; border-style:dashed; text-align:left; color:#6b7280; }
  
  .meta {
    display:flex; align-items:center; gap:6px; margin-bottom:4px;
    font-size:12px; color:#6b7280;
  }
  .meta .from { font-weight:700; color:#111827; }
  .meta .time { margin-left:auto; }
  
  .text { white-space: pre-wrap; line-height:1.45; }
  .text a { text-decoration: underline; }
  .text code {
    background:#f4f4f5; border-radius:4px; padding:0 4px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  }
  .text.mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace; }
  
  .row.typing .typing-bubble { display:inline-flex; align-items:center; }
  .dots { display:inline-flex; gap:4px; padding:6px 4px; }
  .dots span { width:6px; height:6px; border-radius:50%; background:#9aa3af; animation: blink 1.4s infinite both; }
  .dots span:nth-child(2){ animation-delay:.2s; }
  .dots span:nth-child(3){ animation-delay:.4s; }
  @keyframes blink { 0%,80%,100%{opacity:.2} 40%{opacity:1} }
  
  /* Composer */
  .composer {
    display:grid; grid-template-columns: 1fr auto;
    gap:10px; margin-top:10px; padding-top:10px; border-top:1px solid #f0f0f0;
  }
  .suffix-hint { color:#9aa3af; font-size:12px; }
  
  /* Chips */
  .chips { display:flex; flex-wrap:wrap; gap:6px; padding:0; margin:8px 0 0; list-style:none; }
  .chips.under { margin-top:10px; }
  
  /* Responsivo */
  @media (max-width: 920px) {
    .chat-layout { grid-template-columns: 1fr; }
    .sidebar { border-right: 0; padding-right: 0; }
  }
  


  /* ===== Cursor de espada global (solo dentro de la app) ===== */

/* Variables para no repetir rutas/coords */
:root {
    /* Hotspots: <url> X Y, fallback */
    --cursor-sword: url('assets/cursors/sword-default.png') 2 2, auto;
    --cursor-sword-pointer: url('assets/cursors/gloves.png') 10 4, pointer;
  }
  
  /* Limita el cursor a la app. Si tu raíz es otra, ajústalo (por ej. app-root) */
  .app-shell {
    /* Aplica por defecto a todo dentro de la app */
    cursor: var(--cursor-sword);
  }
  
  /* Todo descendiente, EXCEPTO campos de texto/editables, también espada */
  .app-shell *:not(input):not(textarea):not([contenteditable="true"]) {
    cursor: var(--cursor-sword);
  }
  
  /* Inputs/textarea/edición: I-Beam normal */
  .app-shell input,
  .app-shell textarea,
  .app-shell [contenteditable="true"] {
    cursor: text;
  }
  
  /* Elementos “clickables”: usa la variante de puntero */
  .app-shell a,
  .app-shell button,
  .app-shell [role="button"],
  .app-shell .ant-btn,
  .app-shell .nz-btn,
  .app-shell .clickable,
  .app-shell [nz-button],
  .app-shell [routerLink] {
    cursor: var(--cursor-sword-pointer);
  }
  
  /* Elementos que muestran “mover”, “prohibido”, “redimensionar” — opcional */
  .app-shell [draggable="true"] { cursor: move; }
  .app-shell .resize-ew { cursor: ew-resize; }
  .app-shell .resize-ns { cursor: ns-resize; }
  .app-shell .not-allowed { cursor: not-allowed; }
  
  /* Si necesitas desactivar el cursor de espada en alguna zona concreta,
     añade la clase .cursor-auto a ese contenedor */
  .cursor-auto, .cursor-auto * {
    cursor: auto !important;
  }
  


/* Escalado global -20% */
html.app-scale-80 {
  /* Navegadores Chromium/WebKit (Chrome, Edge, Safari) */
  zoom: 0.8;
}

/* Fallback estándar (Firefox y otros sin 'zoom') */
@supports not (zoom: 1) {
  html.app-scale-80 {
    transform: scale(0.8);
    transform-origin: 0 0;
  }
  /* Compensar el “encogido” para ocupar todo el viewport */
  html.app-scale-80,
  html.app-scale-80 body {
    width: 125%;
    height: 125%;
  }
}