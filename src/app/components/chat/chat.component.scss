/* ===== Variables por defecto (si quitas el binding inline) ===== */
:host{
  --shell-offset: 72px;
  --left-w:  clamp(420px, 34vw, 600px);  /* resumen más ancho */
  --right-w: clamp(400px, 30vw, 560px);  /* tirador más ancho */
  --cols-gap: 16px;
}

/* ===== Grid ===== */
.chat-layout{
  display: grid;
  /* Si mantienes el binding inline en el HTML, esta línea no aplica; si lo quitas, sí: */
  grid-template-columns: var(--left-w) minmax(0,1fr) var(--right-w);
  gap: var(--cols-gap);
  align-items: start;
  min-height: calc(100vh - 110px);
}

/* Sidebars sticky con scroll propio */
.sidebar{
  position: sticky;
  top: var(--shell-offset);
  max-height: calc(100dvh - var(--shell-offset) - 16px);
  overflow: auto;
  box-sizing: border-box;
}
.sidebar.left  { border-right: 1px solid #eee; padding-right: 14px; }
.sidebar.right { border-left: 1px solid #eee; padding-left: 14px; }

/* Panel visual */
.panel{
  margin: 16px 0;
  padding: 14px;
  border: 1px solid #f0f0f0;
  border-radius: 10px;
  background: #fff;
  box-sizing: border-box;
}

/* Chat con scroll independiente */
.chat{ display:flex; flex-direction:column; min-height:60vh; }
.chat{
  min-height: 0;
  height: calc(100dvh - var(--shell-offset) - 16px);
  overflow: hidden; /* scrollea .log */
}
.log{
  flex: 1 1 auto;
  min-height: 0;
  overflow: auto;
  padding: 12px;
  border: 1px solid #e8e8e8;
  border-radius: 10px;
  background:
    radial-gradient(600px 300px at 100% -20%, rgba(149,114,252,.06), transparent 60%),
    radial-gradient(600px 300px at -20% 100%, rgba(16,185,129,.06), transparent 60%),
    #fcfcfd;
  color:#111827;

  scrollbar-width: thin;
  scrollbar-color: rgba(0,0,0,.28) transparent;
}
.log::-webkit-scrollbar { width: 10px; height: 10px; }
.log::-webkit-scrollbar-track { background: transparent; }
.log::-webkit-scrollbar-thumb {
  background-color: rgba(0,0,0,.28);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
.log:hover::-webkit-scrollbar-thumb { background-color: rgba(0,0,0,.42); }
.log::-webkit-scrollbar-corner { background: transparent; }

/* ==== Tiradas: vuelve a 4 columnas al ser más ancho ==== */
.sidebar.right app-dice-roller .types{
  display:grid !important;
  grid-template-columns: repeat(4, minmax(84px,1fr));
  gap:8px;
}
.sidebar.right app-dice-roller .types [nz-button]{ display:block; width:100%; }
.sidebar.right app-dice-roller .row{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.sidebar.right app-dice-roller .row .inline nz-input-number{ width:100%; max-width:120px; }

/* ===== Responsivo ===== */
@media (max-width: 1280px){
  /* baja un poco los mínimos para que quepa en pantallas medias */
  :host{
    --left-w:  clamp(380px, 36vw, 520px);
    --right-w: clamp(360px, 28vw, 500px);
  }
}
@media (max-width: 920px){
  .chat-layout{ grid-template-columns: minmax(0,1fr) !important; gap: 14px; }
  .sidebar.left, .sidebar.right{
    position: static; max-height: none; overflow: visible; border: 0; padding: 0;
  }
  .chat { height: auto; overflow: visible; }
  .log  { max-height: 50vh; } /* opcional */
}

/* Drawer */
.sheet-drawer .ant-drawer-body{ overflow:auto; }


.chat {
  position: relative; /* imprescindible */
}

app-combat-fx-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 50; /* por encima del log y el input */
}
