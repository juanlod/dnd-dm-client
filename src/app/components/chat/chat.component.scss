/* ========= GRID: izquierda | chat | derecha (ancho adaptable) ========= */
.chat-layout{
  display:grid;
  grid-template-columns: 360px minmax(0,1fr) clamp(380px,26vw,520px); /* ‚Üê derecha ancha */
  gap:22px;
  min-height:calc(100vh - 110px);
}

/* En pantallas medianas nos quedamos con dos columnas (la derecha baja) */
@media (max-width:1200px){
  .chat-layout{ grid-template-columns: 340px minmax(0,1fr); }
}

/* ========= SIDE BARS STICKY (con scroll propio) ========= */
.sidebar{
  align-self:start;
  position: sticky;
  top: var(--shell-offset, 72px);         /* ajusta si tu header mide m√°s/menos */
  max-height: calc(100dvh - var(--shell-offset,72px) - 16px);
  overflow: auto;                         /* scroll propio */
  border-right: 1px solid #eee;
  padding-right:14px;
  box-sizing:border-box;
}

/* Quita el borde de la izquierda en la derecha */
.sidebar.right{
  border-right:0;
  border-left:1px solid #eee;
  padding-left:14px;
  padding-right:0;
}

/* En m√≥vil/estrecho, las barras dejan de ser sticky y se apilan */
@media (max-width:920px){
  .sidebar,
  .sidebar.right{
    position: static;
    max-height: none;
    overflow: visible;
    border: 0;
    padding: 0;
  }
}

/* ========= Paneles visuales de las sidebars ========= */
.panel{
  margin:16px 0;
  padding:14px;
  border:1px solid #f0f0f0;
  border-radius:10px;
  background:#fff;
  box-sizing:border-box;
}

/* ========= Tracker: tarjeta ‚ÄúTurno activo‚Äù m√°s ancha (dos columnas) ========= */
.tracker2 .active-card{
  display:grid;
  grid-template-columns: 1.1fr 0.9fr;    /* izquierda: identidad | derecha: timer/siguientes */
  gap:14px;
  align-items:center;
}
@media (max-width:1400px){
  .tracker2 .active-card{ grid-template-columns: 1.2fr 0.8fr; }
}
@media (max-width:920px){
  .tracker2 .active-card{ grid-template-columns: 1fr; }
}
.tracker2 .active-card .info .name{ font-size:16px; font-weight:700; }
.tracker2 .active-card .right .timer nz-progress,
.tracker2 .active-card .right .timer .time{ width:100%; }
.tracker2 .active-card .right .chips{ display:flex; flex-wrap:wrap; gap:6px; }

/* ========= Dice Roller en la sidebar derecha: botones anchos ========= */
.sidebar.right app-dice-roller .types{
  display:grid !important;
  grid-template-columns: repeat(4, minmax(84px,1fr));
  gap:8px;
}
.sidebar.right app-dice-roller .types [nz-button]{
  display:block; width:100%;
}
.sidebar.right app-dice-roller .row{
  display:grid; grid-template-columns:1fr 1fr; gap:10px;
}
.sidebar.right app-dice-roller .row .inline nz-input-number{
  width:100%; max-width:96px;
}

/* ========= Chat log con scroll independiente (por si a√∫n no lo ten√≠as) ========= */
.chat{ display:flex; flex-direction:column; min-height:60vh; }
.log{
  flex:1;
  min-height:0;              /* ¬°clave para que el overflow funcione dentro del grid/flex! */
  overflow:auto;
  padding:12px;
  border:1px solid #e8e8e8;
  border-radius:10px;
  background:
    radial-gradient(600px 300px at 100% -20%, rgba(149,114,252,.06), transparent 60%),
    radial-gradient(600px 300px at -20% 100%, rgba(16,185,129,.06), transparent 60%),
    #fcfcfd;
  color:#111827;
}
/* Altura del header fijo; ajusta si tu navbar mide distinto */
:root { --shell-offset: 72px; }

/* La columna central del chat: altura limitada + sin scroll propio */
.chat {
  display: flex;
  flex-direction: column;

  /* üëá clave para que el hijo .log pueda scrollear */
  min-height: 0;

  /* üëá limitamos la altura del √°rea de chat a la ventana visible */
  height: calc(100dvh - var(--shell-offset, 72px) - 16px);

  /* que no haga scroll este contenedor, solo el .log */
  overflow: hidden;
}

/* El log s√≠ scrollea */
.log {
  flex: 1 1 auto;

  /* üëá clave dentro de flex/grid */
  min-height: 0;

  overflow: auto;
  will-change: transform;       /* suaviza en algunos navegadores */
  -webkit-overflow-scrolling: touch;
}

/* Por si un grid impide crecer al √≠tem central */
.chat-layout { align-items: start; }

/* Modo m√≥vil: dejamos que la p√°gina scrollee y ponemos un tope al log si quieres */
@media (max-width: 920px) {
  .chat {
    height: auto;
    overflow: visible;
  }
  .log {
    max-height: 50vh;           /* opcional: para que no ocupe todo */
  }
}


/* --- Log: fondo transparente --- */
.log {
  /* el scroll sigue activo por overflow:auto, pero sin fondo */
  background: transparent !important;
  border: 1px solid rgba(0,0,0,.08); /* opcional: conserva el borde suave */
  
  /* scrollbar moderno (Firefox) */
  scrollbar-width: thin;
  scrollbar-color: rgba(0,0,0,.28) transparent; /* thumb | track */
}

/* WebKit (Chromium/Safari/Edge) */
.log::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}
.log::-webkit-scrollbar-track {
  background: transparent;           /* üëà pista transparente */
}
.log::-webkit-scrollbar-thumb {
  background-color: rgba(0,0,0,.28); /* color del thumb */
  border-radius: 8px;
  border: 2px solid transparent;     /* crea padding visual sin pintar el track */
  background-clip: padding-box;
}
.log:hover::-webkit-scrollbar-thumb {
  background-color: rgba(0,0,0,.42); /* un poco m√°s visible al pasar el rat√≥n */
}
.log::-webkit-scrollbar-corner {
  background: transparent;
}

/* Modo oscuro (opcional) */
:root[color-scheme='dark'] .log {
  scrollbar-color: rgba(255,255,255,.35) transparent;
}
:root[color-scheme='dark'] .log::-webkit-scrollbar-thumb {
  background-color: rgba(255,255,255,.28);
}
:root[color-scheme='dark'] .log:hover::-webkit-scrollbar-thumb {
  background-color: rgba(255,255,255,.45);
}
