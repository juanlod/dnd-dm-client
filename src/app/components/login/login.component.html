<div class="auth-wrapper">
  <nz-card class="auth-card" [nzBordered]="false">
    <div class="brand">
      <div class="logo">üßô‚Äç‚ôÇÔ∏è</div>
      <div class="titles">
        <h2 nz-typography class="title">Entrar a la mesa</h2>
        <p nz-typography class="subtitle">Comparte el mismo ID de campa√±a con tu grupo.</p>
      </div>
    </div>

    <!-- üëá Forzamos layout vertical -->
    <form nz-form nzLayout="vertical" [formGroup]="form" (ngSubmit)="submit()" class="form">
      <!-- Nombre -->
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="name">Tu nombre</nz-form-label>
        <nz-form-control [nzValidateStatus]="f.name" [nzErrorTip]="nameErrors">
          <nz-input-group [nzPrefix]="namePrefix">
            <input nz-input id="name" formControlName="name" placeholder="Ej: Lirien" autocomplete="off" />
          </nz-input-group>
          <ng-template #namePrefix>üë§</ng-template>
          <ng-template #nameErrors>
            <ng-container *ngIf="f.name.hasError('required')">El nombre es obligatorio.</ng-container>
            <ng-container *ngIf="f.name.hasError('minlength')">M√≠nimo 2 caracteres.</ng-container>
            <ng-container *ngIf="f.name.hasError('maxlength')">M√°ximo 24 caracteres.</ng-container>
            <ng-container *ngIf="f.name.hasError('pattern')">Usa letras/n√∫meros/espacios/guiones.</ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>

      <!-- Room ID -->
      <nz-form-item>
        <nz-form-label [nzRequired]="true" nzFor="roomId">ID de campa√±a</nz-form-label>
        <nz-form-control [nzValidateStatus]="f.roomId" [nzErrorTip]="roomErrors">
          <nz-input-group [nzPrefix]="roomPrefix" [nzSuffix]="roomSuffix">
            <input nz-input id="roomId" formControlName="roomId" placeholder="ej: bosque-01" autocomplete="off" />
          </nz-input-group>
          <ng-template #roomPrefix>üè∑Ô∏è</ng-template>
          <ng-template #roomSuffix>
            <button nz-button nzSize="small" type="button" (click)="generateRoomId()">Generar</button>
          </ng-template>
          <ng-template #roomErrors>
            <ng-container *ngIf="f.roomId.hasError('required')">El ID es obligatorio.</ng-container>
            <ng-container *ngIf="f.roomId.hasError('minlength')">M√≠nimo 3 caracteres.</ng-container>
            <ng-container *ngIf="f.roomId.hasError('maxlength')">M√°ximo 40 caracteres.</ng-container>
            <ng-container *ngIf="f.roomId.hasError('pattern')">Solo min√∫sculas, n√∫meros y guiones (slug).</ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>

      <!-- Recordarme -->
      <div class="row remember">
        <label nz-checkbox formControlName="remember">Recordarme en este equipo</label>
      </div>

      <!-- Acciones -->
      <div class="actions">
        <button nz-button nzType="primary" [nzLoading]="loading" [disabled]="form.invalid || loading" htmlType="submit">
          Entrar
        </button>
        <button nz-button nzType="default" type="button" (click)="form.reset({ name: '', roomId: '', remember: true })">
          Limpiar
        </button>
      </div>

      <div class="general-error" *ngIf="generalError">{{ generalError }}</div>
    </form>
  </nz-card>
</div>
