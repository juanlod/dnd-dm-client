<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>CR√ìNICAS ‚Äî Mesa con DM</title>

  <!-- DEV: en local SIEMPRE "/" -->
  <base href="/" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#111827" />
  <meta name="description" content="Juega D&D online con chat, tiradas de dados, fichas compartidas y efectos de combate." />
<!-- Favicons -->
<link rel="icon" href="favicon.ico?v=4" sizes="any" />
<link rel="shortcut icon" href="favicon.ico?v=4" type="image/x-icon" />
<link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32.png?v=5" />
<link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16.png?v=5" />
<link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon.png?v=5" />


  <!-- Open Graph / Social -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="CR√ìNICAS ‚Äî Mesa con DM" />
  <meta property="og:description" content="Juega D&D online con tu grupo. ¬°Entra a la campa√±a!" />
  <meta property="og:image" content="assets/og/cover.png" />

  <!-- Tipograf√≠as (opcional) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Uncial+Antiqua&family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />

  <!-- Splash RPG -->
  <style>
    :root{
      --ink:#f9fafb; --muted:#d1d5db; --bg:#111827;
      --gem:#8b5cf6; --emerald:#10b981; --rose:#ef4444; --gold:#d4af37;
    }
    html,body{
      height:100%; background: var(--bg); margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      color: var(--ink);
    }
    .rpg-canvas{
      position: fixed; inset: 0; pointer-events: none; z-index: 0;
      background:
        radial-gradient(1200px 600px at 100% -20%, rgba(139,92,246,.12), transparent 60%),
        radial-gradient(1200px 600px at -20% 100%, rgba(16,185,129,.12), transparent 60%),
        radial-gradient(1200px 600px at 50% -40%, rgba(239,68,68,.10), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.0) 35%),
        #0b1020;
    }
    #boot-splash{ position: fixed; inset: 0; display: grid; place-items: center; z-index: 10; }
    .splash-card{
      position: relative; width: min(92dvw, 560px);
      padding: 24px 20px 18px; border-radius: 16px; text-align: center; isolation: isolate; overflow: hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03)), rgba(255,255,255,.04);
      backdrop-filter: blur(6px);
      border: 1px solid rgba(255,255,255,.08);
      box-shadow: 0 24px 60px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.15);
    }
    .crest{ width: 68px; height: 68px; margin: 4px auto 12px; display: grid; place-items: center; position: relative;
      filter: drop-shadow(0 6px 12px rgba(0,0,0,.35)); }
    .crest::before{
      content:""; position:absolute; inset: 0; border-radius: 50%;
      background: conic-gradient(from 0deg, var(--gold) 0 45%, #f3e6b3 45% 55%, var(--gold) 55% 100%);
      mask: radial-gradient(circle 28px at center, transparent 28px, #000 29px); opacity: .9;
    }
    .crest .gem{ font-size: 36px; transform: translateY(2px); text-shadow: 0 0 18px rgba(139,92,246,.55); }
    .title{ font-family: "Uncial Antiqua", Inter, serif; font-weight: 400; font-size: 28px; letter-spacing: .06em; margin: 0; color: #fff; text-shadow: 0 1px 0 rgba(0,0,0,.35); }
    .subtitle{ margin: 6px 0 0; color: var(--muted); font-size: 14px; }
    .divider{ display: grid; grid-template-columns: 28px 1fr 28px; align-items: center; gap: 8px; margin: 14px 0; opacity: .9; }
    .divider .rule{ height: 1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent); }
    .orn{ color: var(--gold); text-shadow: 0 0 8px rgba(212,175,55,.5); }
    .rune{ width: 56px; height: 56px; margin: 0 auto 6px; border-radius: 50%; border: 3px solid rgba(255,255,255,.15); border-top-color: var(--gem); animation: spin 1.1s linear infinite; }
    @keyframes spin{ to{ transform: rotate(360deg); } }
    .hint{ color: #cbd5e1; font-size: 12px; opacity: .9; }
    .hide-splash{ opacity: 0; pointer-events: none; transition: opacity .35s ease; }
    app-root{ display:block; min-height: 100dvh; }
  </style>
</head>
<body>
  <!-- fondo -->
  <div class="rpg-canvas" aria-hidden="true"></div>

  <!-- Splash RPG -->
  <div id="boot-splash" role="status" aria-live="polite" aria-label="Cargando aplicaci√≥n">
    <div class="splash-card">
      <div class="crest"><div class="gem">üßô‚Äç‚ôÇÔ∏è</div></div>
      <h1 class="title">Cr√≥nicas de la Mesa</h1>
      <p class="subtitle">Invocando conjuros, preparando la campa√±a‚Ä¶</p>
      <div class="divider"><span class="orn">‚ú¶</span><span class="rule"></span><span class="orn">‚ú¶</span></div>
      <div class="rune" aria-hidden="true"></div>
      <div class="hint">Si tarda, el servidor puede estar despertando‚Ä¶</div>
    </div>
  </div>

  <noscript>
    <div style="color:#fff; padding:16px; text-align:center; background:#b91c1c">
      Necesitas habilitar JavaScript para usar esta aplicaci√≥n.
    </div>
  </noscript>

  <!-- Selector del componente ra√≠z (debe coincidir con tu App) -->
  <app-root class="app-shell"></app-root>

  <!-- Oculta el splash en cuanto Angular monta (robusto) -->
  <script>
    (function () {
      var splash = document.getElementById('boot-splash');
      if (!splash) return;

      function hide() {
        if (!splash) return;
        splash.classList.add('hide-splash');
        setTimeout(function(){ if (splash && splash.parentNode) splash.parentNode.removeChild(splash); }, 450);
        splash = null;
      }

      function hasAngularRoot() {
        return document.querySelector('[ng-version]');
      }

      // Si ya existe ra√≠z Angular, oculta
      if (hasAngularRoot()) { hide(); return; }

      // Observa todo el body por si el selector ra√≠z no es app-root
      var obs = new MutationObserver(function() {
        if (hasAngularRoot()) { obs.disconnect(); hide(); }
      });
      obs.observe(document.body, { childList: true, subtree: true });

      // Fallbacks de cortes√≠a en dev
      window.addEventListener('load', function(){
        setTimeout(function(){ if (hasAngularRoot()) hide(); }, 300);
        setTimeout(function(){ hide(); }, 4000);
      });
    })();
  </script>
</body>
</html>
